# 检查邮件发送日志的步骤

## 问题
在另一台电脑上注册时没有收到邮件，但日志中没有看到邮件发送相关的信息。

## 诊断步骤

### 步骤 1：查看完整的注册日志

在另一台电脑上：

1. **打开 Logcat**
   - 在 Android Studio 中打开 Logcat 面板
   - 确保选择了正确的设备和应用包名：`com.cao.secondhand`

2. **搜索注册相关日志**
   - 在 Logcat 搜索框中输入：`AuthRepository`
   - 或者搜索：`EmailService`
   - 或者搜索：`register`

3. **执行注册操作**
   - 在应用中点击"注册"
   - 输入邮箱和密码
   - 点击"注册"按钮

4. **查看日志输出**
   - 应该看到以下日志：
     - `AuthRepository: 开始注册: xxx@ucdconnect.ie`
     - `EmailService: 发送验证邮件到: xxx@ucdconnect.ie`
     - `EmailService: 验证邮件发送成功` 或 `发送邮件失败`

### 步骤 2：检查是否有错误

在 Logcat 中：

1. **过滤错误日志**
   - 点击 Logcat 的过滤器，选择 "Error" 或 "Warning"
   - 查看是否有红色或黄色的错误信息

2. **查看完整错误堆栈**
   - 如果有错误，展开查看完整的堆栈信息
   - 特别注意 `EmailService` 或 `AuthRepository` 相关的错误

### 步骤 3：检查 SendGrid Dashboard

1. **登录 SendGrid Dashboard**
   - 访问 https://app.sendgrid.com/
   - 进入 **Activity** → **Email Logs**

2. **检查邮件发送记录**
   - 查看是否有新的邮件发送记录
   - 检查状态：
     - **Delivered** - 已送达（但可能被标记为垃圾邮件）
     - **Bounced** - 退回（邮箱地址无效）
     - **Blocked** - 被阻止（可能被标记为垃圾邮件）
     - **Deferred** - 延迟（稍后重试）

3. **查看邮件详情**
   - 点击邮件记录查看详细信息
   - 检查收件人邮箱地址是否正确
   - 查看是否有错误信息

### 步骤 4：常见问题检查

#### 问题 1：日志被过滤
- **解决**：清除 Logcat 过滤器，显示所有日志级别

#### 问题 2：注册操作未完成
- **解决**：确保点击了"注册"按钮，并等待操作完成

#### 问题 3：网络连接问题
- **解决**：检查设备网络连接，确保可以访问外网

#### 问题 4：SendGrid API 限制
- **解决**：检查 SendGrid Dashboard 中的使用量，确认是否达到限制

## 需要的信息

请提供以下信息以便进一步诊断：

1. **完整的注册日志**（从点击注册按钮开始的所有日志）
2. **SendGrid Dashboard 中的邮件记录**（如果有的话）
3. **注册时是否有错误提示**（应用界面上的错误信息）
4. **网络连接状态**（设备是否能正常访问互联网）

## 临时解决方案

如果问题暂时无法解决：

1. **使用开发者模式**
   - 在注册界面点击"开发模式"按钮
   - 跳过邮箱验证，直接进入应用

2. **手动验证**
   - 如果用户在其他设备注册过，可以在新设备上直接登录
   - 系统会自动从 Supabase 同步用户信息





